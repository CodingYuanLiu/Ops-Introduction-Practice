# Computer Network 计算机网络
## Introduction 导入

> 早期计算机技术并没有与网络通信技术直接联系。随着工业、
商业与军事部门的使用计算机的深入，
人们需要将分散在不同地方的数据进行集中处理。因此，
人们发明了一种叫做`收发器`的终端设备，可以将穿孔卡片上的数据利用电话线路发送到远处的计算机。

由此，形成了 `终端-通信线路-计算机`，这也是计算机网络的雏形。

此后计算机网络不断发展，至今一共经历了四个阶段:
* 面向终端的计算机通信网络</br>
    &nbsp;&nbsp;
    此阶段通过网络连接的时终端，比如电话机等，计算机作为中心，
    所有网络均连接到计算机上，计算机获取网络上的数据进行集中处理。
* 计算机互联网络
    &nbsp;&nbsp;
    此阶段建立在`英国国家物理实验室 NPL 的Davies提出的分组(Packet)概念基础上`。
    核心时`分组交换技术`，相当于使用通信网络将`面向终端的计算机`连起来，是的计算机不仅可以获取终端的数据，
    还可以访问网络上的其他计算机提供的资源。
* 具有统一的网络体系结构、遵循国际标准化协议的标准计算机网络
    &nbsp;&nbsp;
    基于`计算机互联网络`，计算机网络体系结构不断发展，为了使得不同体系结构的计算机可以相互连通，
    国际标准化组织ISO提出了一个能使各种计算机在世界范围内互联成网的标准框架 ————
    开放系统互连参考模型(Open System Interconnection Reference Model, OSI/RM)
* 网络互联与高速网络
    &nbsp;&nbsp;
    此阶段的计算机网络已经告诉发展，形成了遍布全球的通信网络`Internet`。此阶段
    的计算机实现了IP化，应用TCP/IP协议组建整个通信网。

## Basic Of Computer Network (网络基础知识)
* IPv4</br>
    由四个8位整数组成，范围 0 ~ 255。部分IP保留位内部局域网及广播等用途
    * 10.*， 192.168.*， 172.16.* ~ 172.31.* 保留位内部局域网
    * 127.* 软件回环测试
* 子网掩码</br>
    IP由网络号和主机号构成，比如192.168.1.2/24, 则192.168.1就是网络号(Net-ID),
    2则是主机号。</br>
    其中 /24 既是掩码，用来判断网络号和主机号，从而判断两个IP是否是同一个网段
    下</br>
    /24的意思是: 24个1，从掩码的角度看，也即是在该网段下，所有IP前面的24位bit
    都是一样的。并且，掩码和IP获的网络号的方法是 Net-ID & 子网掩码(255.255.255.0)
* 常见模型
    * OSI/RM 七层网络模型 (Open Sysem Inderconnect)</br>
        OSI 模型系统全面，理论研究完整，分层结构较为清晰，但是因为分了
        7层，实现复杂度较高，在实际应用中比较少
    * TCP/IP 四层网络模型(也可以说是三层)</br>
        TCP/IP 模型实在网络建立起来之后，根据协议建立的模型，应用上完全适应
        TCP/IP协议，但是相比OSI模型理论并不完整。因为只有四层，实现和应用都比
        OSI模型方便，应用也更加广泛

* 种类
    * 无线网 (WIFI)</br>
        * 没有可见介质，传输依靠红外线、微波、无线电等介质。
        * 无线信号以电磁波的形式存在
    * 有线网 (Wired Network)</br>
        * 传输依靠双绞线、同轴电缆、光缆等
* 传输参数
    * 数据传输速率</br>
    即常见的网速，单位一般为 bps, bit per second. 单位时间内，传送的二进制的
    有效位数
    * 波特率</br>
        * 也称位调制速率、波形速率或者码元速率。描述单位时间内传送的波形数，1 Baud 代表
        一秒钟内，传送了1 个波形
        * 波形对应数字信号，即bit，若是`二相调制`，即一个波形对应2个bit, 低电平、
        高电平。若是`四相调制`,即一个波形对应4个bit， 0，1/4，1/2，1四个bit。
        * 波特率(B)和数据传输速率(S)有对应关系，S = Blog<sub>2</sub>n
* 硬件
    * 调制解调器</br>
    * 链路交换机
    * 路由器
    
## Top-Down Approach 自顶向下分析因特网
### Introduction 
在Internet传输

![Internet协议工作Flow](./imgs/netwrok-workflow.png)

### Application 应用层

#### Protocols 主要协议
1. HTTP 协议
    * HTTP协议使用TCP作为其支撑运输协议。HTTP客户首先发起一个与服务器的连接，建立连接后，通过套接字收发报文。
    * HTTP协议是**非持续链接**的协议，因此HTTP协议在获取DOC文档对象后对文档进行解析，得到其他文档的引用，例如图片的引用，CSS文件的引用，再重复获取DOC文档的流程，进行TCP连接获取这些引用文档的数据。

2. SMTP 协议
    * SMTP协议是早期提出来的，英特网电子邮件应用的核心。
    * SMTP协议仅支持ASCII字节码，因此如果需要使用SMTO协议传输二进制，需要进行转码。( XMPP也是这样的，不过也有相应的二进制提议解决方案
3. FTP 协议 
    * 文件传输协议。
    * FTP使用两个并行的TCP连接进行传输文件，一个是 `控制连接`, 一个是 `数据连接`。
    * `控制连接`在FTP客户端首先在服务器21端口发起控制的TCP连接时建立。FTP客户端通过该控制连接发送用户的标识和口令，更改远程服务器目录(创建文件、删除文件...)命令也是通过控制连接进行发送。当服务器在控制连接收到文件传输的命令后，就发起一个到客户端的TCP数据连接，(通过控制连接辨别客户端)

#### TCP / UDP
1. TCP 传输
    > TCP传输服务包括面向连接服务和可靠数据传输服务。

    * 面向连接的服务
        * 在应用层数据报文考试流动之前，TCP让客户和服务器交换运输层控制信息，即所谓的握手。
        * 握手完成之后, 一个TCP连接就在两个进程的套接字之间建立了，并且这个连接是全双工的，即连接双方可以同时进行报文收发。
    * 可靠的数据传送服务
        * 依靠TCP可以就行无差错、按照适当顺序的数据交换。
    * 拥塞控制机制

2. UDP 传输
    > UDP传输服务仅提供最小服务，不提供不必要服务的轻量级运输服务。
    
    UDP是无连接的，它提供的数据传输服务是不可靠的，因为它在传输前不会确定目的地是否连接成功，并且也不保证传输顺序。</br>
    也因此，UDP是一种轻量级传输服务，应用在容错性大的app上效率较高。


Applications choices    
|应用|应用层协议|支撑的运输协议|
|---|---|---|
|电子邮件|SMTP|TCP|
|Web|HTTP|TCP|
|文件传输|FTP|TCP|
|即时通讯|XMPP，QQ |UDP、TCP|

#### DNS (Domain Name System)
由于计算机的表示和人记忆的差别，在计算机中采用的定长数字串IP地址，对于人来来说并不是很友好。于是就产生了主机名，比如 www.baidu.com, www.google.com，为了能够使计算机和人类都能够很方便的表示记忆主机的名称，就产生了一个对应表，202.120.40.8是IP地址，计算机知道，人类只需要记忆 www.xxx.xxx 就行了

> DNS是: 1. 一个由分层的DNS服务器实现的分布式数据库。2. 一个使得主机能够查询分布式数据库的应用层协议。

> DNS服务器通常是运行在 BIND(Berkeley Internet Name Domain) 软件 的 UNIX机器。DNS协议运行在UDP之上，使用53端口。

**DNS 作用**:
1. 主机别名
    有些主机的名称比较复杂，它可以获得别名(canonical hostname)，当应用程序需要知道该主机的IP时，就可以通过DNS获取规范的主机名和IP地址。
2. 负载均衡
    有些主机名对应很多个IP，这些冗余的主机用来均衡负载。那么当有请求到这个主机名时，DNS就会按照一定的规则返回IP地址，这样做就可以分摊服务器的压力。

**DNS采用了分布式的设计方案**:

![DNS部分层次架构](./imgs/network-dns.png)

**DNS 分类**
* 根DNS服务器
* 顶级域服务器
* 权威DNS服务器

以上的分类对应于上面的DNS分布式架构图。</br>
DNS查询往往需要先发送给`根DNS服务器`，然后`根DNS服务器`通过查看顶级域名，返回`顶级域服务器`的IP列表。获取到`顶级域服务器`IP列表后，选择其中之一，发送请求，`顶级域服务器`返回对应的`权威DNS服务器`。最后发送给`权威DNS服务器`，获取目标主机的IP地址。

### Transport 运输层


### Network 网络层
### Data Link 链路层
### Physical 物理层



## Different Types Of Network

### LAN 局域网
#### WHAT IS LAN 什么时局域网

#### HOWT TO MEASURE


### WAN 广域网
#### WHAT IS WAN
#### HOWT TO MEASURE

### Difference Between LAN & WAN 局域网和广域网之间的区别
* 覆盖范围
* 传输介质
    * LAN

    * WAN
* 通信方式
* 通信管理
* 通信效率
* 网络性能

### Wired Network 有线网
#### WHAT IS LAN
#### HOWT TO MEASURE

### WLAN 无线局域网 Wireless Local Area Network
#### WHAT IS LAN
#### HOWT TO MEASURE


### WPAN 无线个人局域网


### 1G、2G、3G、4G 蜂窝数据移动网络
